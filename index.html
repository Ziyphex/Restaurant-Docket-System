<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href='https://fonts.googleapis.com/css?family=Berkshire Swash' rel='stylesheet'>
	    <link href='https://fonts.googleapis.com/css?family=Parisienne' rel='stylesheet'> 
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	</head>
	<style>
		body{
		 background: url("https://www.wellbeing.com.au/wp-content/uploads/blogimgs/2014/08/111.jpeg") no-repeat center center fixed; 
		 background-size: cover;
		 }
		 #container{ width:99vw; height:85vh;}
		 #navbar{ margin-left:-1vw; width:100.5vw; height:6vh; margin-top:5%; /*background-color: green;*/ background: url("https://i.pinimg.com/originals/19/2a/8c/192a8c19663a404a33b8321d88acede5.jpg") no-repeat center center fixed; background-size: cover; }
		#contentsBar{ width:99vw; height:78vh; float: left; }
		#currentUser, #newUser{ width:23.5vw; height:75vh; background-color: white; float:left; margin-right: 1%; text-align: center; overflow: auto; border:1px solid black; align-items: center; font-family: "Parisienne"; font-size: 1.3vw;  }
		#contents{ width:38%; height:79vh; float: left; }
		#docketHeader{ width:100%; height:10%; }
        #logo{ width: 40%; height:100%; background-color: #e8e9ea; float:left; text-align: center; font-family: "Parisienne"; font-weight: bold; font-size: 3vw; border-radius:25%; }
        #listen1, #listen2{ height:100%; width:30%; float:left; float: top; text-align: center; background: linear-gradient(-90deg, #496b4e, yellow); font-size: 1vw; border-radius:25%; font-family: "Berkshire Swash"; text-decoration: underline; font-weight: bold; }
        #blank1, #blank2{ height:100%; width:30%; text-align: center; float:right; float: top;  background: linear-gradient(to right, #496b4e , yellow); font-size: 1vw; border-radius:25%; font-family: "Berkshire Swash" }
        .allInputs{ width:60%; height:6%; margin-top: 5%; border-radius: 15%; text-align: center; }
        .theButtons{ margin-top: 29%; width:100%; height:7%; float:left; border-radius: 15%; background: red; background: radial-gradient(red, yellow, green); font-size: 1.3vw; font-family: "Berkshire Swash"; font-weight: bold;  }
        .theButton2{ margin-top: 20%; width:100%; height:7%; float:left; border-radius: 15%; background: red; background: radial-gradient(red, yellow, green); font-size: 1.3vw; font-family: "Berkshire Swash"; font-weight: bold;  }

		 #header{ width:100%; height:15%;  color:green; font-size: 4vw; font-family:"Parisienne"; text-align:center; text-decoration: underline; font-weight: bold; }

		 #thisThing{ font-size: 1.5vw; font-family: "Berkshire Swash"; font-weight: bold; }

		 #uname{ margin-bottom:1%; width:50%; }
		 #company{ margin-bottom:1%; width:50%; }
		 #username{ margin-bottom:1%; width:50%; }
		 #pass{ margin-bottom:1%; width:50%; }
		 #password{ margin-bottom:1%; width:50%; }
		 #in{ margin-bottom:1%; }
		 #input{ margin-bottom:1%; }
		 #up{ margin-bottom:1%; }
		 #output{ margin-bottom:1%; }
		 #usernameContainer{ float:right; margin-right: 5%; }
		 #forgotPassword{ color:#c95e3a; }

	</style>
	<body>
		<div id="container">
			<div id="navbar">
				<!-- <marquee id="thisThing" behavior="scroll" direction="left" scrollamount="13">NEED A PLACE TO ORGANISE YOUR RESTAURANTS DOCKETS? DISHED OUT IS HERE TO SERVE YOU!</marquee> -->
				<div id="usernameContainer"></div>
			</div>
			<div id="contentsBar">
				<div id="contents"></div>

				<!-- log in div -->
				<div id="currentUser">
					<div id="header">DishedOut</div>
					<div id='docketHeader'>
	                    <div id="listen1"><h3>LOGIN</h3></div>
	                    <div id='logo'>D</div>
	                    <div id='blank1'><h3>SIGNUP</h3></div>
	                </div><br>
	                <span>Email</span><br>
	                <input class="allInputs" type="email" id="username" placeholder="Email"><br>
	                <!-- <input class="allInputs" id="uname" type="text" placeholder="Email"><br> -->
	                <span>Password</span><br>
	                <input class="allInputs" type="password" id="password" placeholder="Password"><br><br>
	                <span id="forgotPassword" onclick="why()"><u>Forgot Password?</u></span><br>
					<!-- <input class="allInputs" id="pass" type="password" placeholder="Password"><br> -->
					<!-- <input class="theButtons" id="in" type="submit" value="Log In"> -->
					<button class="theButtons" id="login">Login</button>
				</div>

				<!-- sign up div -->
				<div id="newUser">
					<div id="header">DishedOut</div>
					<div id='docketHeader'>
	                    <div id="listen2"><h3>LOGIN</h3></div>
	                    <div id='logo'>D</div>
	                    <div id='blank2'><h3>SIGNUP</h3></div>
	                </div><br>
	                <span>Company Name</span><br>
	                <input class="allInputs" id="company" type="text" placeholder="Company"><br>
	                <span>Email</span><br>
	                <input class="allInputs" id="uname" type="email" placeholder="Email"><br>
	                <span>Password</span><br>
					<input class="allInputs" id="pass" type="password" placeholder="Password"><br>
					<button class="theButton2" id="sendInfo">Sign Up</button>
					<!-- <input class="theButtons" id="up" type="submit" value="Sign Up"> -->
				</div>
			</div>
		</div>
	</body>

	<!-- initialise firebase -->
	<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
	<script>
		// Initialize Firebase
		var config = {
			apiKey: "AIzaSyCdM0cDcs2qJB2llg1a-61TaaABpgzfR-A",
			authDomain: "test-635ac.firebaseapp.com",
			databaseURL: "https://test-635ac.firebaseio.com",
			projectId: "test-635ac",
			storageBucket: "test-635ac.appspot.com",
			messagingSenderId: "88199967986"
		};
		firebase.initializeApp(config);
	</script>

	<!-- functional code -->
	<script>
		/*firebase listeners for page progression*/

		/*listen to create a new user*/
		var button = document.getElementById("sendInfo");
		button.addEventListener("click", function(){

			var company = document.getElementById("company");
			var comp = company.value;
			var uname = document.getElementById("uname");
			var pass = document.getElementById("pass");
			var usern = uname.value;
			var thePass = pass.value;
			
			var create_user = firebase.auth().createUserWithEmailAndPassword(usern, thePass).then(function(e){
				e.updateProfile({
		        	displayName: comp
				}).then(function() {
				    window.location="nextPage.html";
				}, function(error) {
				     console.log("Error");
				});
			});
			create_user.catch(function(error) {
			  	// Handle Errors here.
			  	var errorCode = error.code;
			  	console.log(errorCode);
			  	var errorMessage = error.message;
			  	console.log(errorMessage);
			});
		});

		/*listen to log in a new user*/
		var button2 = document.getElementById("login");
		button2.addEventListener("click", function(){

			var username = document.getElementById("username");
			var password = document.getElementById("password");
			var user = username.value;
			var pass = password.value;

			var theUser = firebase.auth().signInWithEmailAndPassword(user, pass).then(function(){
				window.location="nextPage.html";
			});
			theUser.catch(function(error) {
			  	// Handle Errors here.
			  	var errorCode = error.code;
			  	console.log(errorCode);
			  	var errorMessage = error.message;
			  	console.log(errorMessage);
			});

		});

		/*check the state of login. if successful, say so and show logged in users name on screen. otherwise, dont.*/
		firebase.auth().onAuthStateChanged(function(user) {
		  if (user) {
		    console.log("Logged In");
		    console.log(user);
		    document.getElementById("usernameContainer").innerHTML = "<div onclick='forward()'>Logged In: "+user.displayName+"<div>";
		    var thisLoggedUser = user.displayName;

		    /*for sign up*/
		    var txtuser = document.getElementById("uname");
			var txtpassword = document.getElementById("pass");

			/*for log in*/
			var txtuser = document.getElementById("username");
			var txtpassword = document.getElementById("password");

			/*for login/signup*/
			var login = document.getElementById("login");
			var signup = document.getElementById("sendInfo");

		  } else {
		    console.log("Logged Out");
		    $("#usernameContainer").append("");
		  }
		});

		/*if user is signed in and at index.html, this function allows them to get back to their page without relogging*/
		function forward(){
			window.location="nextPage.html"
		}

		$("#newUser").hide();

			$("#blank1").click(function(){
			$("#blank1").css("textDecoration", "underline");
			$("#blank1").css("fontWeight", "bold");
			$("#listen1").css("textDecoration", "none");
			$("#listen1").css("fontWeight", "none");
			$("#blank2").css("textDecoration", "underline");
			$("#blank2").css("fontWeight", "bold");
			$("#listen2").css("textDecoration", "none");
			$("#listen2").css("fontWeight", "none");
			$("#newUser").show();
			$("#currentUser").hide();
		});
		$("#listen1").click(function(){
			$("#blank1").css("textDecoration", "none");
			$("#blank1").css("fontWeight", "none");
			$("#listen1").css("textDecoration", "underline");
			$("#listen1").css("fontWeight", "bold");
			$("#blank2").css("textDecoration", "none");
			$("#blank2").css("fontWeight", "none");
			$("#listen2").css("textDecoration", "underline");
			$("#listen2").css("fontWeight", "bold");
			$("#newUser").hide();
			$("#currentUser").show();
		});
		$("#blank2").click(function(){
			$("#blank1").css("textDecoration", "underline");
			$("#blank1").css("fontWeight", "bold");
			$("#listen1").css("textDecoration", "none");
			$("#listen1").css("fontWeight", "none");
			$("#blank2").css("textDecoration", "underline");
			$("#blank2").css("fontWeight", "bold");
			$("#listen2").css("textDecoration", "none");
			$("#listen2").css("fontWeight", "none");
			$("#newUser").show();
			$("#currentUser").hide();
		});
		$("#listen2").click(function(){
			$("#blank1").css("textDecoration", "none");
			$("#blank1").css("fontWeight", "none");
			$("#listen1").css("textDecoration", "underline");
			$("#listen1").css("fontWeight", "bold");
			$("#blank2").css("textDecoration", "none");
			$("#blank2").css("fontWeight", "none");
			$("#listen2").css("textDecoration", "underline");
			$("#listen2").css("fontWeight", "bold");
			$("#newUser").hide();
			$("#currentUser").show();
		});

		function why(){
			alert("Why Do You Have To Be So Forgetful?");
		}

	</script>
</html>